# XML Sitemap – Sim2Me (sim2me.net)

This document describes the site’s XML sitemap: how it’s generated, where it’s served, how to submit it to Google Search Console, and how to maintain it.

---

## 1. Sitemap overview

- **Protocol:** [sitemaps.org protocol](https://www.sitemaps.org/protocol.html) (XML, UTF-8).
- **Generated by:** Next.js App Router from `src/app/sitemap.ts` (dynamic, revalidated hourly).
- **No static file:** The sitemap is not a static XML file in the repo; Next.js serves it at runtime.

### What’s included

- **Static indexable pages** (all locales: en, he, ar):  
  Home, Destinations, Articles index, App, How it works, Compatible devices, Installation guide, Help, About, Contact, Terms, Privacy, Refund, Cookies, Accessibility statement.
- **Destination pages:** `/destinations/[slug]` for each destination returned by `/api/packages` (all locales).
- **Articles:** `/articles/[slug]` for each **published** article, in its correct locale only.

### What’s excluded (on purpose)

- `/checkout`, `/account/*` – disallowed in `robots.txt`, so not in the sitemap.
- `/success` – post-purchase thank-you page; not used for discovery.
- `/admin/*`, `/api/*` – system/admin; disallowed and not in sitemap.
- Draft or noindex articles – only `status: 'PUBLISHED'` articles are included.
- Duplicate or canonicalized URLs – each URL appears once; articles use their article locale.

All URLs in the sitemap use **HTTPS** and the canonical base URL (no mixed HTTP/HTTPS).

---

## 2. File location and URL

| Item | Value |
|------|--------|
| **Implementation** | `src/app/sitemap.ts` |
| **Served at (path)** | `/sitemap.xml` (root of the site) |
| **Final public URL** | **https://www.sim2me.net/sitemap.xml** |
| **Referenced in** | `src/app/robots.ts` → `Sitemap: https://www.sim2me.net/sitemap.xml` |

You do **not** need to place any XML file in the repo or in the “root directory” of the server; Next.js serves `/sitemap.xml` from the app.

---

## 3. XML structure (what Next.js produces)

Next.js turns the return value of `sitemap.ts` into valid sitemap XML, e.g.:

- Root: `<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">`
- Each entry: `<url>` with `<loc>`, `<lastmod>`, `<changefreq>`, `<priority>` where provided.
- Encoding: UTF-8.
- All URLs are absolute HTTPS, same host as the site.

So the output conforms to the sitemaps.org protocol and is suitable for Google.

---

## 4. Submitting the sitemap in Google Search Console

### 4.1 Verify the property (if not already)

1. Go to [Google Search Console](https://search.google.com/search-console).
2. Add a property: **URL prefix** → `https://www.sim2me.net`.
3. Choose a verification method, e.g.:
   - **HTML file upload** – upload the file to the root (or the path GSC gives).
   - **HTML tag** – add the meta tag to the site (e.g. in `layout.tsx` under `metadata.verification.google`).
   - **DNS** – add the TXT record to your domain DNS.
4. Click **Verify**. Only one method is needed.

### 4.2 Submit the sitemap

1. In Search Console, open the property for **https://www.sim2me.net**.
2. In the left menu: **Sitemaps** (under “Indexing”).
3. Under **Add a new sitemap**, enter:  
   **sitemap.xml**  
   (only the path; the domain is already the property).
4. Click **Submit**.

The full URL Google will use is: **https://www.sim2me.net/sitemap.xml**.

### 4.3 Check indexing status

- **Sitemaps** page: status of the sitemap (e.g. “Success”, “Couldn’t fetch”, “Has errors”). Click the sitemap to see discovered URLs and any errors.
- **Pages** (under “Indexing”): how many URLs are “Indexed”, “Discovered”, etc.
- **URL Inspection**: paste a URL from the sitemap to see if it’s indexed and if there are coverage or canonical issues.

If you see “Couldn’t fetch” or errors, check that:

- The site is publicly reachable at `https://www.sim2me.net`.
- `https://www.sim2me.net/sitemap.xml` returns 200 and valid XML.
- `NEXT_PUBLIC_SITE_URL` (and any URL used in `sitemap.ts`) is `https://www.sim2me.net` in production.

---

## 5. Ongoing best practices

### 5.1 Auto-update (current behavior)

- The sitemap is **regenerated on each request** (dynamic) and **revalidated every 1 hour** (`revalidate = 3600`).
- New destinations (from `/api/packages`) and new/updated published articles are included after the next generation.
- No manual “upload” of the sitemap file is needed; deploying the app is enough.

### 5.2 How often to “resubmit”

- You don’t need to resubmit the sitemap URL in GSC when content changes; Google will re-crawl **https://www.sim2me.net/sitemap.xml** periodically.
- Optionally, after a large content update (e.g. many new articles or destinations), open **Sitemaps** in GSC and use **Request indexing** or re-submit **sitemap.xml** once.

### 5.3 When to regenerate / redeploy

- **Code/content changes** that affect which URLs exist (e.g. new static routes, new locale): deploy the app so `sitemap.ts` and routing stay in sync.
- **New articles or article status changes:** already handled at runtime (DB); next sitemap request will reflect them.
- **New destinations:** already handled at runtime (API); next sitemap request will reflect them.

So: regenerate is automatic; redeploy when you change the app’s routes or sitemap logic.

### 5.4 Monitoring errors

- **Google Search Console → Sitemaps:** check status and any error messages or “Couldn’t fetch”.
- **Google Search Console → Pages / URL Inspection:** use for 404s, redirects, or “Page not found” on URLs that appear in the sitemap.
- **Coverage / Excluded:** review why URLs might be excluded (e.g. canonical, redirect, noindex) and fix in the app or remove from sitemap if they shouldn’t be indexed.
- Ensure **robots.txt** stays aligned: no indexable URL in the sitemap should be under a path that `robots.txt` disallows (we already exclude `/checkout`, `/account/`, etc. from the sitemap).

---

## 6. Priority and changefreq (reference)

Rough mapping used in `sitemap.ts`:

| Page type | Priority | Changefreq |
|-----------|----------|------------|
| Home | 1 | daily |
| Destinations index | 0.95 | daily |
| Articles index | 0.9 | weekly |
| App, How it works | 0.85 | weekly / monthly |
| Compatible devices, Installation guide, Help, About, Contact | 0.75–0.8 | monthly / weekly |
| Destination detail | 0.7 | weekly |
| Article detail | 0.6 | monthly |
| Terms, Privacy, Refund, Cookies, Accessibility | 0.5 | yearly |

These are hints for crawlers; they don’t guarantee crawl rate or ranking.

---

## 7. Validation

- The sitemap is valid if:
  - **https://www.sim2me.net/sitemap.xml** returns HTTP 200 and XML with `<urlset>` and `<url>`/`<loc>`.
  - No URL in it is disallowed by **https://www.sim2me.net/robots.txt**.
  - All URLs use HTTPS and the same host.
- You can also validate the XML against the [sitemaps.org XSD](http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd) with any XML validator.

---

**Summary:** The sitemap is generated by `src/app/sitemap.ts`, served at **https://www.sim2me.net/sitemap.xml**, and referenced in `robots.ts`. Submit **sitemap.xml** in Google Search Console once the property is verified, and use GSC to monitor indexing and errors. No manual XML file upload or placement in the root directory is required.
